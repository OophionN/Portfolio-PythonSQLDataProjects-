Проект "Тестирование замены шрифтов"
Вы работаете в стартапе, который продаёт продукты питания. Нужно разобраться, как ведут себя пользователи вашего мобильного приложения.

Необходимо изучить воронку продаж.

Узнайть, как пользователи доходят до покупки.

Сколько пользователей доходит до покупки, а сколько — «застревает» на предыдущих шагах? На каких именно?

После этого необходимо исследовать результаты A/A/B-эксперимента.

Дизайнеры захотели поменять шрифты во всём приложении, а менеджеры испугались, что пользователям будет непривычно. Договорились принять решение по результатам A/A/B-теста.

Пользователей разбили на 3 группы: 2 контрольные со старыми шрифтами и одну экспериментальную — с новыми. Выясните, какой шрифт лучше.

Создание двух групп A вместо одной имеет определённые преимущества. Если две контрольные группы окажутся равны, вы можете быть уверены в точности проведенного тестирования. Если же между значениями A и A будут существенные различия, это поможет обнаружить факторы, которые привели к искажению результатов. Сравнение контрольных групп также помогает понять, сколько времени и данных потребуется для дальнейших тестов.

В случае общей аналитики и A/A/B-эксперимента работайте с одними и теми же данными. В реальных проектах всегда идут эксперименты. Аналитики исследуют качество работы приложения по общим данным, не учитывая принадлежность пользователей к экспериментам.

Описание данных
Каждая запись в логе — это действие пользователя, или событие:

- EventName — название события;
- DeviceIDHash — уникальный идентификатор пользователя;
- EventTimestamp — время события;
- ExpId — номер эксперимента: 246 и 247 — контрольные группы, а 248 — экспериментальная.

Выполнение проекта

Этап 1. Подготовьте данные

- Замените названия столбцов на удобные для вас;
- Проверьте пропуски и типы данных. Откорректируйте, если нужно;
- Добавьте столбец даты и времени, а также отдельный столбец дат;

Этап 2. Изучите и проверьте данные

- Сколько всего событий в логе?
- Сколько всего пользователей в логе?
 -Сколько в среднем событий приходится на пользователя?
- Данными за какой период вы располагаете? Найдите максимальную и минимальную дату. Постройте гистограмму по дате и времени. Можно ли быть уверенным, что у вас одинаково полные данные за весь период? Технически в логи новых дней по некоторым пользователям могут «доезжать» события из прошлого — это может «перекашивать данные». Определите, с какого момента данные полные и отбросьте более старые. Данными за какой период времени вы располагаете на самом деле?
- Много ли событий и пользователей вы потеряли, отбросив старые данные?
 -Проверьте, что у вас есть пользователи из всех трёх экспериментальных групп.

Этап 3. Изучите воронку событий

- Посмотрите, какие события есть в логах, как часто они встречаются. Отсортируйте события по частоте.
- Посчитайте, сколько пользователей совершали каждое из этих событий. Отсортируйте события по числу пользователей.
- Посчитайте долю пользователей, которые хоть раз совершали событие.
- Предположите, в каком порядке происходят события. Все ли они выстраиваются в последовательную цепочку? Их не нужно учитывать при расчёте воронки.
- По воронке событий посчитайте, какая доля пользователей проходит на следующий шаг воронки (от числа пользователей на предыдущем). То есть для последовательности событий A → B → C посчитайте отношение числа пользователей с событием B к количеству пользователей с событием A, а также отношение числа пользователей с событием C к количеству пользователей с событием B.
- На каком шаге теряете больше всего пользователей?
- Какая доля пользователей доходит от первого события до оплаты?

Этап 4. Изучите результаты эксперимента

- Сколько пользователей в каждой экспериментальной группе?
- Есть 2 контрольные группы для А/А-эксперимента, чтобы проверить корректность всех механизмов и расчётов. Проверьте, находят ли статистические критерии разницу между выборками 246 и 247.
- Выберите самое популярное событие. Посчитайте число пользователей, совершивших это событие в каждой из контрольных групп. Посчитайте долю пользователей, совершивших это событие. Проверьте, будет ли отличие между группами статистически достоверным. Проделайте то же самое для всех других событий (удобно обернуть проверку в отдельную функцию). Можно ли сказать, что разбиение на группы работает корректно?
- Аналогично поступите с группой с изменённым шрифтом. Сравните результаты с каждой из контрольных групп в отдельности по каждому событию. Сравните результаты с объединённой контрольной группой. Какие выводы из эксперимента можно сделать?
- Какой уровень значимости вы выбрали при проверке статистических гипотез выше? Посчитайте, сколько проверок статистических гипотез вы сделали. При уровне значимости 0.1 каждый десятый раз можно получать ложный результат. Какой уровень значимости стоит применить? Если вы хотите изменить его, проделайте предыдущие пункты и проверьте свои выводы.
Общий план выполнения проекта

Перед выполнением любой из задач, в первую очередь необходимо подготовить набор библиотек, познакомится с данными.

Сам процесс исследования будет проведен в следующем порядке (основные этапы):

- загрузка библиотек и знакомство с данными
- предобработка данных (Этап 2)
- формирование временных таблиц, включая новые сводные (если потребуется)
- проведение 3 Этапа - первичная оценка данных, в части соразмерности, общих границ, аномалий, попаданий в разные группы одних и тех же пользователей (если применимо), детальное изучение наполнения всех трех групп
- проведение 4 Этапа, на котором построим первые воронки, оценм отток, визуализируем первые воронки
- проведение 5 Этапа - изучение результатов эксперемента (к этому этапу необходимо провести все первчиные корректировки и оценки)
- Общие выводы по результатам
Итоговая цель анализа - оценка результатов текущего этапа тестирования, обобщение рещультатов изучения конверсии, выявление точек внимания, рекомендации


--------------------------------
5  Итоговый вывод.
5.1  По результатам исследования можем выделить несколько моментов:
1.    В представленном датасете (далее – ДС) общий период составляет около 14 дней. Детальное изучение ДС показало, что за период с 25 июля по 31 августа включительно, данных практически нет. Однако, с 1 августа наблюдается многократный рост активности. В этой связи, проведен анализ совершенных эвентов в срезе пользователей, и выявлены 149 пользователей, которые имеют аномально высокую активность (более 136 совершенных действий за период с 1 по 8 августа). В этой связи, принято решение скорректировать в ДС 2 момента:
I.    Удалить гиперактивных пользователей.
II.    Скорректировать временной интервал анализа, а именно оставлен как корректный период с 1 по 8 августа.

2.    В результате изучения воронок мы установили, что:
•    в логах встречается 5 типов событий (с частотой появления):
    - Main Screen Appear - главный экран (109324, с удельной пропорцией 56,5%)
    - Offers Screen Appear - экран предложений (37696, 19,5%)
    - Cart Screen Appear - экран корзины (26539, 13,7%)
    - Payment Screen Successful - экран успешной оплаты (19997, 10.3%)
    - Tutorial - 808

•    события по типам и расчетом уникальных пользователей на каждое событие:
    - MainScreenAppear - 7292
    - OffersScreenAppear - 4466
    - CartScreenAppear - 3588
    - PaymentScreenSuccessful - 3395

•    Доля уникальных пользователей, которые хоть раз совершали любое событие отличное от просмотра главного экрана -  63,14%, дальше главного экрана не ушли 38,86% (на первом шаге 7292, на втором только 4466) пользователей - довольно большая цифра, стоит взять на заметку, возможно имеет место техническая проблема.

•    логически события идут в следующем порядке: MainScreenAppear - OffersScreenAppear - CartScreenAppear - PaymentScreenSuccessful. Просмотр Tutorial необязательный этап, его мы исключили при разборе.

•    Ранее мы выяснили, что среди уникальных пользователей дальше главного экрана не ушло 38,7% пользователей, в общем отношении всех операций значения также требуют изучения за рамками настоящего анализа (видимо некоторые пользователи не столкнулись с потенциальной технической проблемой, которую мы предположили при расчете уникальных пользователей), и так:
o    MainScreenAppear - 100% (шаг 1)
o    на шаге OffersScreenAppear только 61,14% от тех, кто был на главной странице
o    от предложения до корзины CartScreenAppear доходит 80,7% из шага 2 (предложение)
o    от корзины до успешной оплаты PaymentScreenSuccessful 94,62% из шага 3 (корзина)

•    Таким, образом, безотносительно оценки уникальных пользователей, явные проблемы с конверсией от главной страницы до просмотра предложения (вопрос для передачи коллегам так как, или у нас технические проблемы, или пользователям настолько неудобно пользоваться сайтом).

3.    Проведены статистические тесты А1/А2-тест, А1/В-тест, А2/В-тест, А1+А2/В-тест.
    a.    Всего проведено 3 A/B теста и 1 А/А тест, в каждом по 4 этапа - итого 16 проверок гипотез на данных без использования поправки Холма, и столько же тестов с использованием поправок Холма. При проведении тестов проводилась оценка по следующим гипотезам:
        I.    Гипотеза H0 - статистической разницы между группами нет
        II.    Гипотеза H1 - есть статистическая разница между группами 

На первом этапе применялись в качестве уровня значимости указанные, в результатах без поправки Холма, значения.
Результаты тестов до приминения поправки Холма:

    -  А1/А2-тест, уровень значимости 0,01:
           1. Этап 'MainScreenAppear'. 'p-значение:0.5904565100159676'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'               
           2. Этап 'OffersScreenAppear'. 'p-значение:0.36114194983637615'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'               
           3. Этап 'CartScreenAppear'. 'p-значение:0.23446149906995117'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'               
           4. Этап 'PaymentScreenSuccessful'.'p-значение:0.13334226878893363'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'

    - А1/В-тест, уровень значимости 0,05:
        1. 'Этап - MainScreenAppear'.'p-значение:0.32579209352565'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'            
        2.'Этап - OffersScreenAppear'. 'p-значение:0.21848106975343873'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'            
        3. 'Этап - CartScreenAppear'.'p-значение:0.08725015373223144'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'            
        4. 'Этап - PaymentScreenSuccessful'.'p-значение:0.22040644524309005'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'

    - А2/В-тест, уровень значимости 0,05:
        1. 'Этап - MainScreenAppear'.'p-значение:0.6544821577013522'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        2. 'Этап - OffersScreenAppear'.'p-значение:0.7502650724782389'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        3.'Этап - CartScreenAppear'.'p-значение:0.6011268322884902'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        4.'Этап - PaymentScreenSuccessful'.'p-значение:0.7813716681767917'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'

    - А1+А2/В-тест, уровень значимости 0,05:
        1.'Этап - MainScreenAppear'.'p-значение:0.40587169814078106'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        2.'Этап - OffersScreenAppear'.'p-значение:0.3725288984802724'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        3.'Этап - CartScreenAppear'.'p-значение:0.19844602291192937'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        4.'Этап - PaymentScreenSuccessful'.'p-значение:0.5870703788523293'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
Результаты тестов после приминения поправки Холма:

Значения уровня значимости, после расчета поправки Холма, существенно скорректировались в меньшую сторону, что уменьшает вероятность ложнопозетивного результата.

    -  А1/А2-тест, уровень значимости 0,0025:
           1. Этап 'MainScreenAppear'. 'p-значение:0.764988759488143'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'               
           2. Этап 'OffersScreenAppear'. 'p-значение:0.2794373773714116'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'               
           3. Этап 'CartScreenAppear'. 'p-значение:0.26909398870001455'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'               
           4. Этап 'PaymentScreenSuccessful'.'p-значение:0.13975791207596155'
           'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'


    - А1/В-тест, уровень значимости 0,0125:
        1. 'Этап - MainScreenAppear'.'p-значение:0.2369891935845656'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'            
        2.'Этап - OffersScreenAppear'. 'p-значение:0.17797143659165315'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'            
        3. 'Этап - CartScreenAppear'.'p-значение:0.06394416898469357'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'            
        4. 'Этап - PaymentScreenSuccessful'.'p-значение:0.19927895265165052'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'


    - А2/В-тест, уровень значимости 0,0125:
        1. 'Этап - MainScreenAppear'.'p-значение:0.37400643924274246'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        2. 'Этап - OffersScreenAppear'.'p-значение:0.790405486710803'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        3.'Этап - CartScreenAppear'.'p-значение:0.45343385549545934'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        4.'Этап - PaymentScreenSuccessful'.'p-значение:0.8454610539792848'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'


    - А1+А2/В-тест, уровень значимости 0,0125:
        1.'Этап - MainScreenAppear'.'p-значение:0.22315599235522665'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        2.'Этап - OffersScreenAppear'.'p-значение:0.3533640949113348'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        3.'Этап - CartScreenAppear'.'p-значение:0.13364566367079211'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
        4.'Этап - PaymentScreenSuccessful'.'p-значение:0.5321457255242299'
        'Не получилось отвергнуть нулевую гипотезу, нет оснований считать доли разными'
Таким образом, по результатам вышеописанного исследования значимой разницы между контрольными группами и тестовой не выявлено, корректировка шрифта существенного эффекта не оказала. Опасения менеджеров не подтвердились, тестирование предлагается признать успешным.

